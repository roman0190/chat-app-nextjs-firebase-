(()=>{var e={};e.id=929,e.ids=[929],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},7282:e=>{"use strict";e.exports=require("process")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},629:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),s(7230),s(9687),s(5866);var r=s(3191),a=s(8716),n=s(7922),i=s.n(n),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["chat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7230)),"/Users/romanhowladar/Desktop/Next App/chat-app-nextjs-firebase-/src/app/chat/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,9687)),"/Users/romanhowladar/Desktop/Next App/chat-app-nextjs-firebase-/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/romanhowladar/Desktop/Next App/chat-app-nextjs-firebase-/src/app/chat/page.tsx"],u="/chat/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/chat/page",pathname:"/chat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6950:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},3161:(e,t,s)=>{Promise.resolve().then(s.bind(s,179)),Promise.resolve().then(s.bind(s,9993)),Promise.resolve().then(s.bind(s,8436))},417:(e,t,s)=>{Promise.resolve().then(s.bind(s,4851))},3062:(e,t,s)=>{"use strict";s.d(t,{Ap:()=>u,I8:()=>o,db:()=>d,tO:()=>c});var r=s(2585),a=s(1466),n=s(1552),i=s(76);let l=(0,r.ZF)({apiKey:"AIzaSyBEXMvVLB466qalKZdby8zbR6oXO0_wo1A",authDomain:"roman-apps.firebaseapp.com",databaseURL:"https://roman-apps-default-rtdb.firebaseio.com",projectId:"roman-apps",storageBucket:"roman-apps.appspot.com",messagingSenderId:"691534944125",appId:"1:691534944125:web:17a429186148bbe4639e14",measurementId:"G-26D4NX86NF"}),o=(0,a.v0)(l),c=(0,n.cF)(),d=(0,i.ad)(),u=new a.hJ;new a.O4("apple.com")},8436:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var r=s(326),a=s(7577),n=s(5047),i=s(179);let l=({children:e})=>{(0,n.useRouter)(),(0,n.usePathname)();let{user:t}=(0,a.useContext)(i.V);return r.jsx(r.Fragment,{children:e})}},4851:(e,t,s)=>{"use strict";s.d(t,{default:()=>y});var r=s(326),a=s(179),n=s(3062),i=s(1466),l=s(7577),o=s(76);let c=()=>{let[e,t]=(0,l.useState)(""),[s,i]=(0,l.useState)(null),[c,d]=(0,l.useState)(null),{user:u}=(0,l.useContext)(a.V),p=async()=>{let t=(0,o.hJ)(n.db,"users"),s=(0,o.IO)(t,(0,o.ar)("name","==",e));try{let e=await (0,o.PL)(s);e.empty?(i(null),d("No user found with that name")):e.forEach(e=>{i(e.data()),d(null)})}catch(e){d(e.message),i(null)}},x=async e=>{let r=u.uid>s.uid?u.uid+s.uid:s.uid+u.uid;try{let e=(0,o.JU)(n.db,"chats",r);if(console.log(r),!(await (0,o.QT)(e)).exists()){await (0,o.pl)(e,{messages:[]});let t=(0,o.JU)(n.db,"userChats",u.uid);await (0,o.r7)(t,{[r+".userInfo"]:{uid:s.uid,displayName:s.name,photoURL:s.photoURL},[r+".date"]:(0,o.Bt)()});let a=(0,o.JU)(n.db,"userChats",s.uid);await (0,o.r7)(a,{[r+".userInfo"]:{uid:u.uid,displayName:u.displayName,photoURL:u.photoURL},[r+".date"]:(0,o.Bt)()})}}catch(e){d(e)}i(null),t("")};return(0,r.jsxs)("div",{className:"searchbar flex flex-col mt-2",children:[r.jsx("input",{type:"text",placeholder:"Find a user",className:"bg-[#3C366B] p-1 rounded text-white placeholder-gray-400 focus:outline-none",onChange:e=>t(e.target.value),onKeyDown:e=>{"Enter"===e.code&&p()},value:e}),s?(0,r.jsxs)("div",{className:"searchUser flex mt-2 p-1 hover:bg-gray-600/30",onClick:x,children:[r.jsx("img",{src:s.photoURL,className:"w-12 h-12 rounded-full object-cover",alt:"User Profile"}),r.jsx("div",{className:"flex flex-col w-full justify-center ml-1",children:r.jsx("span",{children:s.name})})]}):c&&r.jsx("p",{className:"text-red-500",children:c}),r.jsx("hr",{className:"border-t border-gray-300 mt-2"})]})};var d=s(9993);let u=()=>{let[e,t]=(0,l.useState)({}),{user:s}=(0,l.useContext)(a.V),{dispatch:i}=(0,l.useContext)(d.p);(0,l.useEffect)(()=>{s?.uid&&(()=>{let e=(0,o.cf)((0,o.JU)(n.db,"userChats",s.uid),e=>{t(e.data()||{})});return()=>{e()}})()},[s?.uid]);let c=e=>{i({type:"CHANGE_USER",payload:e})};return r.jsx("div",{className:"allUser h-full overflow-y-scroll",children:Object.entries(e)?.sort((e,t)=>t[1].date-e[1].date).map(e=>r.jsxs("div",{onClick:()=>c(e[1].userInfo),className:"user flex mt-2 p-1 hover:bg-gray-600/30 rounded-lg",children:[r.jsx("img",{src:e[1].userInfo.photoURL,className:"w-11 h-11 rounded-full object-cover",alt:e[1].userInfo.displayName}),r.jsxs("div",{className:"flex flex-col w-full justify-center ml-1",children:[r.jsx("span",{children:e[1].userInfo.displayName}),r.jsx("span",{className:"text-xs",children:e[1].lastMessage?.text})]})]},e[0]))})},p=()=>{let[e,t]=(0,l.useState)([]),{data:s}=(0,l.useContext)(d.p),{user:i}=(0,l.useContext)(a.V);return(0,l.useEffect)(()=>{if(!s.chatId)return;let e=(0,o.cf)((0,o.JU)(n.db,"chats",s.chatId),e=>{e.exists()&&t(e.data().messages||[])});return()=>{e()}},[s.chatId]),r.jsx(r.Fragment,{children:s.chatId?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"chatNav flex items-center justify-between pl-2 bg-[#3C366B] h-[4.4rem] font-light",children:[(0,r.jsxs)("span",{className:"flex gap-2 items-center",children:[r.jsx("img",{src:s.user?.photoURL,className:"w-10 h-10 rounded-full object-cover",alt:"User"}),s.user?.displayName]}),(0,r.jsxs)("span",{className:"space-x-2",children:[r.jsx("i",{children:"icon"}),r.jsx("i",{children:"icon"}),r.jsx("i",{children:".."})]})]}),r.jsx("div",{className:"chat-container bg-slate-400 h-[86%] lg:h-[83%] md:h-[83%] p-2 flex flex-col overflow-y-auto",children:e.map(e=>r.jsx("div",{className:"messages flex flex-col h-full justify-end",children:(0,r.jsxs)("div",{className:`singleText flex ${e.SenderId===i.uid?"flex-row-reverse":""} gap-2 mt-2`,children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("img",{src:e.SenderId===i.uid?i.photoURL:s.user.photoURL,className:"w-9 h-9 rounded-full object-cover",alt:"Profile"})}),(0,r.jsxs)("div",{className:"bg-white rounded max-w-xs break-words overflow-hidden",children:[e.text&&r.jsx("div",{className:"bg-white text-black p-2",children:e.text}),e.img&&r.jsx("div",{children:r.jsx("img",{src:e.img,alt:"Sent image"})})]}),r.jsx("span",{className:"font-thin text-xs text-white self-end",children:new Date(1e3*e.date.seconds).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0,day:"numeric",month:"short",year:"numeric"})})]})},e.id))})]}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("span",{className:"text-gray-500",children:"Select a User to start messaging"})})})};var x=s(1552);let h=require("node:crypto");var m=s.n(h);let f={randomUUID:m().randomUUID},g=new Uint8Array(256),j=g.length,v=[];for(let e=0;e<256;++e)v.push((e+256).toString(16).slice(1));let b=function(e,t,s){if(f.randomUUID&&!t&&!e)return f.randomUUID();let r=(e=e||{}).random||(e.rng||function(){return j>g.length-16&&(m().randomFillSync(g),j=0),g.slice(j,j+=16)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){s=s||0;for(let e=0;e<16;++e)t[s+e]=r[e];return t}return function(e,t=0){return(v[e[t+0]]+v[e[t+1]]+v[e[t+2]]+v[e[t+3]]+"-"+v[e[t+4]]+v[e[t+5]]+"-"+v[e[t+6]]+v[e[t+7]]+"-"+v[e[t+8]]+v[e[t+9]]+"-"+v[e[t+10]]+v[e[t+11]]+v[e[t+12]]+v[e[t+13]]+v[e[t+14]]+v[e[t+15]]).toLowerCase()}(r)},w=()=>{let[e,t]=(0,l.useState)(""),[s,i]=(0,l.useState)(null),{user:c}=(0,l.useContext)(a.V),{data:u}=(0,l.useContext)(d.p),p=async()=>{if(s){let t=(0,x.iH)(n.tO,`images/${b()}.png`),r=(0,x.B0)(t,s);r.on("state_changed",e=>{},e=>{},()=>{(0,x.Jt)(r.snapshot.ref).then(async t=>{await (0,o.r7)((0,o.JU)(n.db,"chats",u.chatId),{messages:(0,o.vr)({id:b(),text:e,SenderId:c.uid,date:o.EK.now(),img:t})})})})}else await (0,o.r7)((0,o.JU)(n.db,"chats",u.chatId),{messages:(0,o.vr)({id:b(),text:e,SenderId:c.uid,date:o.EK.now()})});await (0,o.r7)((0,o.JU)(n.db,"userChats",c.uid),{[u.chatId+".lastMessage"]:{text:e},[u.chatId+".date"]:(0,o.Bt)()}),await (0,o.r7)((0,o.JU)(n.db,"userChats",u.user.uid),{[u.chatId+".lastMessage"]:{text:e},[u.chatId+".date"]:(0,o.Bt)()}),i(null),t("")},h=e=>{"Enter"===e.code&&p()};return(0,r.jsxs)("div",{className:"inputSection flex bg-slate-500 h-[7vh] ",children:[(0,r.jsxs)("div",{className:"relative flex items-center w-full",children:[r.jsx("input",{onChange:e=>t(e.target.value),type:"text-area",placeholder:"Type something...",className:"bg-white w-full h-full p-2 pr-12 text-black",value:e,onKeyDown:h}),r.jsx("input",{type:"file",onChange:e=>i(e.target.files[0]),className:"hidden",id:"file","aria-label":"Upload file",onKeyDown:h}),r.jsx("label",{htmlFor:"file",className:"absolute right-2 cursor-pointer",children:r.jsx("img",{src:"/imgicon.png",className:"w-10 h-10",alt:"Upload icon"})})]}),r.jsx("button",{onClick:p,className:"w-16 bg-slate-700",children:"send"})]})},y=()=>{let{user:e}=(0,l.useContext)(a.V);return(0,r.jsxs)("div",{className:"flex border rounded-xl h-screen lg:h-[80vh] lg:w-[75rem] md:h-[80vh] md:w-[75rem] overflow-hidden",children:[(0,r.jsxs)("div",{className:"sidebar bg-[#3C366B] w-[50%]",children:[(0,r.jsxs)("div",{className:"sidebarNav flex justify-between pt-5 pb-5 bg-[#5f5a8a]",children:[r.jsx("span",{className:"text-xl font-bold ml-2 hidden md:flex lg:flex",children:"Chat"}),(0,r.jsxs)("span",{className:"flex gap-2 ",children:[r.jsx("img",{src:e.photoURL,className:"w-7 h-7 rounded-full object-cover",alt:""}),r.jsx("span",{className:"mt-1",children:e.displayName}),r.jsx("button",{onClick:()=>{(0,i.w7)(n.I8).then(()=>{window.location.href="/"}).catch(e=>{console.error("Sign out error:",e)})},className:" mr-2 p-1 text-sm border rounded-lg bg-[#393653]",children:"Logout"})]})]}),r.jsx(c,{}),r.jsx(u,{})]}),(0,r.jsxs)("div",{className:"chatSide bg-[#95939a] w-full",children:[r.jsx(p,{}),r.jsx(w,{})]})]})}},179:(e,t,s)=>{"use strict";s.d(t,{AuthContextProvider:()=>c,V:()=>l});var r=s(326),a=s(1466),n=s(7577),i=s(3062);let l=(0,n.createContext)(void 0),o={},c=({children:e})=>{let[t,s]=(0,n.useState)(o);return(0,n.useEffect)(()=>{let e=(0,a.Aj)(i.I8,e=>{s(e)});return()=>e()},[]),r.jsx(l.Provider,{value:{user:t},children:e})}},9993:(e,t,s)=>{"use strict";s.d(t,{ChatContextProvider:()=>l,p:()=>i});var r=s(326),a=s(7577),n=s(179);let i=(0,a.createContext)(void 0),l=({children:e})=>{let{user:t}=(0,a.useContext)(n.V),[s,l]=(0,a.useReducer)((e,s)=>"CHANGE_USER"===s.type?{user:s.payload,chatId:t.uid>s.payload.uid?t.uid+s.payload.uid:s.payload.uid+t.uid}:e,{chatId:null,user:{}});return r.jsx(i.Provider,{value:{data:s,dispatch:l},children:e})}},7230:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(9510);s(1159);var a=s(8570);let n=(0,a.createProxy)(String.raw`/Users/romanhowladar/Desktop/Next App/chat-app-nextjs-firebase-/src/app/chat/components/Chat.tsx`),{__esModule:i,$$typeof:l}=n;n.default;let o=(0,a.createProxy)(String.raw`/Users/romanhowladar/Desktop/Next App/chat-app-nextjs-firebase-/src/app/chat/components/Chat.tsx#default`),c=()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(o,{})})},9687:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b,metadata:()=>v});var r=s(9510),a=s(5317),n=s.n(a);s(5023);var i=s(8570);let l=(0,i.createProxy)(String.raw`/Users/romanhowladar/Desktop/Next App/chat-app-nextjs-firebase-/src/app/context/AuthContext.tsx`),{__esModule:o,$$typeof:c}=l;l.default,(0,i.createProxy)(String.raw`/Users/romanhowladar/Desktop/Next App/chat-app-nextjs-firebase-/src/app/context/AuthContext.tsx#AuthContext`);let d=(0,i.createProxy)(String.raw`/Users/romanhowladar/Desktop/Next App/chat-app-nextjs-firebase-/src/app/context/AuthContext.tsx#AuthContextProvider`),u=(0,i.createProxy)(String.raw`/Users/romanhowladar/Desktop/Next App/chat-app-nextjs-firebase-/src/app/RouteProtect.tsx`),{__esModule:p,$$typeof:x}=u;u.default;let h=(0,i.createProxy)(String.raw`/Users/romanhowladar/Desktop/Next App/chat-app-nextjs-firebase-/src/app/RouteProtect.tsx#default`),m=(0,i.createProxy)(String.raw`/Users/romanhowladar/Desktop/Next App/chat-app-nextjs-firebase-/src/app/context/ChatContext.tsx`),{__esModule:f,$$typeof:g}=m;m.default,(0,i.createProxy)(String.raw`/Users/romanhowladar/Desktop/Next App/chat-app-nextjs-firebase-/src/app/context/ChatContext.tsx#ChatContext`);let j=(0,i.createProxy)(String.raw`/Users/romanhowladar/Desktop/Next App/chat-app-nextjs-firebase-/src/app/context/ChatContext.tsx#ChatContextProvider`),v={title:"Create Next App",description:"Generated by create next app"};function b({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:n().className,children:r.jsx(d,{children:r.jsx(j,{children:r.jsx(h,{children:e})})})})})}},3881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(6621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,101,621],()=>s(629));module.exports=r})();